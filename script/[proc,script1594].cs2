// 1594
[proc,script1594](component $component0, component $component1, component $component2)
cc_deleteall($component0);
def_int $int3 = clan_getchatcount;
def_int $int4 = clan_getchatminkick;
def_int $int5 = clan_getchatrank;
def_int $int6 = 0;
def_string $string0 = "";
def_int $int7 = -1;
def_int $int8 = -1;
def_int $int9 = 0;
while ($int9 < $int3) {
    $int6 = calc($int9 + $int9 + $int9);
    $string0 = clan_getchatusername($int9);
    $int7 = clan_getchatuserworld($int9);
    $int8 = clan_getchatuserrank($int9);
    cc_create($component0, ^iftype_text, $int6);
    cc_settextfont(p11_full);
    cc_settextalign(^settextalign_left, ^settextalign_centre, 0);
    cc_settext($string0);
    cc_setposition(15, calc($int9 * 15), ^setpos_abs_left, ^setpos_abs_top);
    cc_setsize(85, 15, ^setsize_abs, ^setsize_abs);
    cc_setcolour(^white);
    cc_settextshadow(false);
    cc_setonop("clan_op($string0, event_op)");
    if (clan_isself($int9) = false) {
        if (friend_test($string0) = true) {
            cc_setop(9, "Remove friend <$string0>");
        } else if (ignore_test($string0) = true) {
            cc_setop(10, "Remove ignore <$string0>");
        } else {
            cc_setop(7, "Add friend <$string0>");
            cc_setop(8, "Add ignore <$string0>");
        }
    }
    if ($int5 >= $int4 & $int5 > $int8) {
        cc_setop(6, "Kick user <$string0>");
    }
    cc_create($component0, ^iftype_text, calc($int6 + 1));
    cc_settextfont(p11_full);
    cc_settextalign(^settextalign_right, ^settextalign_centre, 0);
    cc_settext("World <tostring($int7)>");
    cc_setposition(98, calc($int9 * 15), ^setpos_abs_left, ^setpos_abs_top);
    cc_setsize(50, 15, ^setsize_abs, ^setsize_abs);
    if ($int7 = map_world) {
        cc_setcolour(^green);
    } else {
        cc_setcolour(0xffff64);
    }
    cc_settextshadow(false);
    cc_setonop("clan_op($string0, event_op)");
    if (clan_isself($int9) = false) {
        if (friend_test($string0) = true) {
            cc_setop(9, "Remove friend <$string0>");
        } else if (ignore_test($string0) = true) {
            cc_setop(10, "Remove ignore <$string0>");
        } else {
            cc_setop(7, "Add friend <$string0>");
            cc_setop(8, "Add ignore <$string0>");
        }
    }
    if ($int5 >= $int4 & $int5 > $int8) {
        cc_setop(6, "Kick user <$string0>");
    }
    cc_create($component0, ^iftype_graphic, calc($int6 + 2));
    cc_setposition(3, calc($int9 * 15 + 2), ^setpos_abs_left, ^setpos_abs_top);
    cc_setsize(9, 9, ^setsize_abs, ^setsize_abs);
    cc_setgraphic(enum(int, graphic, enum_706, $int8));
    cc_setonop("clan_op($string0, event_op)");
    if (clan_isself($int9) = false) {
        if (friend_test($string0) = true) {
            cc_setop(9, "Remove friend <$string0>");
        } else if (ignore_test($string0) = true) {
            cc_setop(10, "Remove ignore <$string0>");
        } else {
            cc_setop(7, "Add friend <$string0>");
            cc_setop(8, "Add ignore <$string0>");
        }
    }
    if ($int5 >= $int4 & $int5 > $int8) {
        cc_setop(6, "Kick user <$string0>");
    }
    $int9 = calc($int9 + 1);
}
if_clearops($component2);
if ($int3 > 0) {
    if_settext("<col=ff9b00>Talking in: <col=ffff64><clan_getchatdisplayname>", interface_589:com_0);
    if_settext("<col=ff9b00>Owner: <col=ffffff><clan_getchatownername>", interface_589:com_1);
    if_settext("Leave Chat", $component2);
    if (%varplayerbit_5432 = 1 | %varplayerbit_4289 ! 0) {
        if_setop(6, "Leave Chat", $component2);
        if_setonop("joinchat_onop(event_op, 6)", $component2);
    } else {
        if_setop(1, "Leave Chat", $component2);
        if_setonop("joinchat_onop(event_op, 1)", $component2);
    }
} else {
    if_settext("<col=ff9b00>Talking in: Not in chat", interface_589:com_0);
    if_settext("<col=ff9b00>Owner: None", interface_589:com_1);
    if_settext("Join Chat", $component2);
    if_setop(1, "Join Chat", $component2);
    if_setonop("joinchat_onop(event_op, 1)", $component2);
}
def_int $int10 = calc(15 * $int3);
def_int $int11 = if_getheight($component0);
if ($int10 < 15) {
    $int10 = 15;
}
def_int $int12 = calc($int10 - $int11);
if ($int12 < 0) {
    $int12 = 0;
}
def_int $int13 = if_getscrolly($component0);
if ($int13 > $int12) {
    $int13 = $int12;
}
if ($int3 > 0) {
    if_setscrollsize(0, $int10, $component0);
} else {
    if_setscrollsize(0, 15, $component0);
}
~scrollbar_resize($component1, $component0, $int13);
