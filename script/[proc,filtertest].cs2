// 90
[proc,filtertest](int $chattype0, string $string0, string $string1, int $int1, int $int2, string $string2)(boolean)
if ($chattype0 = null) {
    return(false);
}
if (enum(int, boolean, enum_892, $chattype0) = true) {
    if ($chattype0 = ^chattype_spam & %varplayerbit_26 = 1) {
        return(false);
    }
    return(true);
}
def_int $chatfilter3 = null;
if ($chattype0 = ^chattype_publicchat) {
    $chatfilter3 = chat_getfilter_public;
    if ($chatfilter3 = ^chatfilter_off | $chatfilter3 = ^chatfilter_hide) {
        return(false);
    }
    if (string_length(%varclientstring_27) > 0 & string_indexof_string(lowercase($string1), %varclientstring_27, 0) = -1) {
        return(false);
    }
    if ($chatfilter3 = ^chatfilter_friends) {
        if (friend_test($string0) = true) {
            return(true);
        }
        return(false);
    }
    return(true);
}
if ($chattype0 = ^chattype_modchat) {
    if (compare($string2, removetags($string0)) = 0) {
        return(true);
    }
    if (string_length(%varclientstring_27) > 0 & string_indexof_string(lowercase($string1), %varclientstring_27, 0) = -1) {
        return(false);
    }
    return(true);
}
if ($chattype0 = ^chattype_autotyper | $chattype0 = ^chattype_modautotyper) {
    if (compare($string2, removetags($string0)) = 0) {
        return(true);
    }
    if (chat_getfilter_public ! ^chatfilter_autochat) {
        return(false);
    }
    if (string_length(%varclientstring_27) > 0 & string_indexof_string(lowercase($string1), %varclientstring_27, 0) = -1) {
        return(false);
    }
    return(true);
}
if ($chattype0 = ^chattype_privatechat) {
    if (%varplayer_287 = 1 & $int2 = 0 & ~trade_partner_check($chattype0, $string0) = false) {
        return(false);
    }
    if (chat_getfilter_private = ^chatfilter_on) {
        return(true);
    }
    if (chat_getfilter_private = ^chatfilter_friends & friend_test($string0) = true) {
        return(true);
    }
    return(false);
}
if ($chattype0 = ^chattype_tradereq | $chattype0 = ^chattype_chalreq_trade) {
    if (chat_getfilter_trade = ^chatfilter_on) {
        return(true);
    }
    if (chat_getfilter_trade = ^chatfilter_friends & friend_test($string0) = true) {
        return(true);
    }
    return(false);
}
if ($chattype0 = ^chattype_loginlogoutnotification | $chattype0 = ^chattype_privatechatout) {
    if ($chattype0 = ^chattype_loginlogoutnotification & %varplayerbit_1627 = 0 & calc(clientclock - $int1) >= 500) {
        return(false);
    }
    if (%varplayer_287 = 1 & $int2 = 0 & ~trade_partner_check($chattype0, $string0) = false) {
        return(false);
    }
    if (chat_getfilter_private ! ^chatfilter_off) {
        return(true);
    }
    return(false);
}
if ($chattype0 = ^chattype_modprivatechat) {
    if (%varplayer_287 = 1 & $int2 = 0 & ~trade_partner_check($chattype0, $string0) = false) {
        return(false);
    }
    return(true);
}
if ($chattype0 = ^chattype_friendschat | $chattype0 = ^chattype_chalreq_friendschat) {
    if (%varplayer_1054 = 0) {
        return(true);
    }
    if (%varplayer_1054 = 1 & friend_test($string0) = true) {
        return(true);
    }
    return(false);
}
if ($chattype0 = ^chattype_friendschatnotification) {
    if (%varplayer_1054 ! 2) {
        return(true);
    }
    return(false);
}
if ($chattype0 = ^chattype_trade) {
    if (chat_getfilter_trade ! ^chatfilter_off) {
        return(true);
    }
    return(false);
}
return(true);
