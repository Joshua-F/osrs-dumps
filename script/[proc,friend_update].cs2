// 125
[proc,friend_update]
def_int $int0 = 0;
def_int $int1 = 0;
cc_deleteall(interface_550:com_1);
if (friend_count = -2) {
    if_settext("Loading friend list<br>Please wait...", interface_550:com_15);
} else if (friend_count = -1) {
    if_settext("Connecting to friendserver<br>Please wait...", interface_550:com_15);
} else {
    if_settext("", interface_550:com_15);
    while ($int0 < friend_count) {
        cc_create(interface_550:com_1, ^iftype_text, $int0);
        cc_settext(friend_getname($int0));
        cc_setposition(1, calc($int0 * 15));
        cc_setsize(100, 14);
        cc_setcolour(^white);
        cc_settextfont(p12_full);
        cc_settextshadow(true);
        cc_setopbase("<col=ffffff><friend_getname($int0)>");
        if (friend_getworld($int0) ! 0) {
            cc_setop(1, "Message");
            cc_setop(2, "");
        } else {
            cc_setop(1, "");
            cc_setop(2, "Message");
        }
        cc_setop(3, "Delete");
        cc_setonop("friend_op(event_op, event_opbase)");
        $int0 = calc($int0 + 1);
    }
    $int0 = 0;
    while ($int0 < friend_count) {
        cc_create(interface_550:com_1, ^iftype_text, calc($int0 + friend_count));
        $int1 = friend_getworld($int0);
        if ($int1 = 0) {
            cc_settext("Offline");
            cc_setcolour(^red);
        } else if ($int1 = map_world) {
            cc_settext("World <tostring($int1)>");
            cc_setcolour(^green);
        } else {
            if ($int1 > 5000) {
                cc_settext("<col=ffff00>Classic <tostring(calc($int1 - 5000))>");
            } else {
                cc_settext("<col=ffff00>World <tostring($int1)>");
            }
            cc_setcolour(^yellow);
        }
        cc_setposition(101, calc($int0 * 15));
        cc_setsize(55, 14);
        cc_settextfont(p12_full);
        cc_settextalign(^settextalign_right, ^settextalign_top, 0);
        cc_settextshadow(true);
        $int0 = calc($int0 + 1);
    }
    if ($int0 < 13) {
        $int0 = 13;
    }
    if (friend_count >= 13) {
        if_setscrollsize(158, calc($int0 * 15 + 5), interface_550:com_1);
        ~scrollbar_resize(interface_550:com_0, interface_550:com_1, %varclient_9);
    } else {
        if_setscrollsize(158, calc($int0 * 15), interface_550:com_1);
        ~scrollbar_resize(interface_550:com_0, interface_550:com_1, 0);
    }
}
