// 91
[proc,pm_filtertest](int $chattype0, string $string0, int $int1)(boolean)
switch_int ($chattype0) {
    case ^chattype_modprivatechat :
        if ($int1 < %varclient_175) {
            return(false);
        }
        if (ignore_test(removetags($string0)) = true) {
            return(false);
        }
        return(true);
    case ^chattype_privatechat :
        if ($int1 < %varclient_175) {
            return(false);
        }
        if (ignore_test(removetags($string0)) = true) {
            return(false);
        }
        if (chat_getfilter_private = ^chatfilter_on) {
            return(true);
        }
        if (chat_getfilter_private = ^chatfilter_friends & friend_test($string0) = true) {
            return(true);
        }
        return(false);
    case ^chattype_loginlogoutnotification, ^chattype_privatechatout :
        if ($int1 < %varclient_175) {
            return(false);
        }
        if ($chattype0 = ^chattype_loginlogoutnotification & %varplayerbit_1627 = 0 & calc(clientclock - $int1) >= 500) {
            return(false);
        }
        if (chat_getfilter_private ! ^chatfilter_off) {
            return(true);
        }
        return(false);
}
return(false);
