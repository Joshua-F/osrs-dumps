// 925
[clientscript,chatbox_init]
%chat_inittime = clientclock;
~chatdefault_setonkey(1);
if_setonvartransmit("chat_onsetupchange{chat_filter_clan, chat_filter_assist, toplevel_temp, magic_carpet_var, tob_temp_transmit_2, option_chat_colour_public_opaque, option_chat_colour_private_opaque, option_chat_colour_autochat_opaque, option_chat_colour_broadcast_opaque, option_chat_colour_friendschat_opaque, option_chat_colour_clanchat_opaque, option_chat_colour_tradereq_opaque, option_chat_colour_challengereq_opaque, option_chat_colour_guestclan_opaque, option_chat_colour_gimchat_opaque, option_chat_colour_clanbroadcast_opaque, option_chat_colour_gimbroadcast_opaque, option_chat_colour_public_transparent, option_chat_colour_private_transparent, option_chat_colour_autochat_transparent, option_chat_colour_broadcast_transparent, option_chat_colour_friendschat_transparent, option_chat_colour_clanchat_transparent, option_chat_colour_tradereq_transparent, option_chat_colour_challengereq_transparent, option_chat_colour_guestclan_transparent, option_chat_colour_gimchat_transparent, option_chat_colour_clanbroadcast_transparent, option_chat_colour_gimbroadcast_transparent, option_chat_colour_private_split, option_chat_colour_broadcast_split, option_chat_colour_didyouknow_opaque, option_chat_colour_didyouknow_transparent}", chatbox:universe);
if_setonsubchange("chat_onsubchange(event_com, getwindowmode, if_hassub(chatbox:chatmodal), if_hassub(chatbox:chatoverlay), ~toplevel_getcomponents)", chatbox:universe);
if_setonchattransmit("chat_onchattransmit", chatbox:universe);
if_setonfriendtransmit("chat_onchattransmit", chatbox:universe);
if_setonclantransmit("rebuildchatbox", chatbox:universe);
if_setonclansettingstransmit("rebuildchatbox", chatbox:universe);
if_setonmisctransmit("script664(true)", chatbox:universe);
%chatinput, %chat_highlight = "", -1;
if (%chat_view >= 0 & %chat_view <= 6 | %chat_view = 1337) {
    %chat_view = %chat_view;
} else {
    %chat_view = 0;
}
%chatout_readpos, %chatout_writepos = -1, 0;
%chatout0, %chatout1, %chatout2, %chatout3, %chatout4, %chatout5, %chatout6, %chatout7, %chatout8, %chatout9, %chatout10, %chatout11, %chatout12, %chatout13, %chatout14, %chatout15, %chatout16, %chatout17, %chatout18, %chatout19 = "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "";
%last_pm_received_sender, %tradepartner = "", "";
%chat_lastbroadcast_time = ^min_32bit_int;
%autotyper, %autochat_pause = "", 0;
def_int $int0 = 0;
def_component $component1 = enum(int, component, enum_579, $int0);
while ($component1 ! null) {
    cc_create(chatbox:scrollarea, ^iftype_text, calc($int0 * 4));
    .cc_create(chatbox:scrollarea, ^iftype_text, calc($int0 * 4 + 1));
    cc_setcolour(^black);
    .cc_setcolour(^black);
    cc_settextfont(p12_full);
    .cc_settextfont(p12_full);
    cc_settextalign(^settextalign_left, ^settextalign_top, 14);
    .cc_settextalign(^settextalign_left, ^settextalign_top, 14);
    cc_sethide(true);
    .cc_sethide(true);
    cc_create(chatbox:scrollarea, ^iftype_text, calc($int0 * 4 + 2));
    .cc_create(chatbox:scrollarea, ^iftype_graphic, calc($int0 * 4 + 3));
    cc_setcolour(^black);
    cc_settextfont(p12_full);
    cc_settextalign(^settextalign_left, ^settextalign_top, 14);
    cc_sethide(true);
    .cc_sethide(true);
    $int0 = calc($int0 + 1);
    $component1 = enum(int, component, enum_579, $int0);
}
$int0 = 0;
def_int $int2 = ~ca_tasks_total;
while ($int0 < $int2) {
    cc_create(chatbox:chat_achievement_click, ^iftype_rectangle, $int0);
    cc_setsize(0, 0, ^setsize_abs, ^setsize_abs);
    cc_setposition(0, 0, ^setpos_abs_left, ^setpos_abs_top);
    $int0 = calc($int0 + 1);
}
if_setscrollpos(0, 0, chatbox:scrollarea);
~scrollbar_vertical(chatbox:chatscrollbar, chatbox:scrollarea, null, null, null, null, null, null);
~toplevel_chatbox_background;
chat_setmessagefilter("");
~script223;
~redraw_chat_buttons;
~rebuildchatbox(~script553);
