// 4131
[proc,magic_spellbook_unlocked](obj $obj0)(boolean)
if (~script4510($obj0) = false) {
    return(false);
}
if (~script4128($obj0) = false) {
    return(false);
}
if (~script4129($obj0) = false) {
    return(false);
}
if ($obj0 = obj_17152) {
    if (%varplayerbit_2010 = 0 | %varplayerbit_5604 >= 5) {
        return(false);
    }
    if (%varplayerbit_14887 = 0 | ~target_world = false) {
        return(false);
    }
}
return(true);
