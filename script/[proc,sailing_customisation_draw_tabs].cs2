// 8812
[proc,sailing_customisation_draw_tabs]
def_component $component0 = sailing_customisation:facility_tabs;
cc_deleteall($component0);
def_int $int1 = 0;
def_int $int2 = 0;
def_int $int3 = 0;
def_int $int4 = 0;
def_int $int5 = db_find(sailing_customisation_tab:type, %sailing_boat_customisation_type);
def_dbrow $dbrow6 = null;
def_dbrow $dbrow7 = %sailing_boat_customisation_boat;
def_string $string0 = "";
def_graphic $graphic8 = null;
def_int $int9 = 0;
def_int $int10 = 0;
def_int $int11 = 0;
def_int $int12 = 0;
def_int $intarray1($int5);
def_int $int13 = 0;
def_int $int14 = -1;
def_int $int15 = -1;
def_int $int16 = 0;
while ($int12 < $int5) {
    db_find(sailing_customisation_tab:type, %sailing_boat_customisation_type);
    db_find_refine(sailing_customisation_tab:tab_id, $int12);
    $dbrow6 = db_findnext;
    if ($dbrow6 ! null) {
        $int9 = db_getfield($dbrow6, sailing_customisation_tab:facility_type, 0);
        if (%sailing_boat_customisation_type = 0) {
            $int3 = ~script9068($dbrow7, $int9, %sailing_boat_customisation_hotspot_id);
        } else if (%sailing_boat_customisation_type = 1) {
            if ($int9 ! 4) {
                $int3 = 0;
            } else {
                $int3 = ~script8815($dbrow6, $dbrow7);
            }
        }
        if ($int3 > 0) {
            $intarray1($int12) = 1;
            $int13 = calc($int13 + 1);
        }
    }
    $int12 = calc($int12 + 1);
}
$int12 = 0;
while ($int12 < $int5) {
    db_find(sailing_customisation_tab:type, %sailing_boat_customisation_type);
    db_find_refine(sailing_customisation_tab:tab_id, $int12);
    $dbrow6 = db_findnext;
    $int16 = 0;
    if ($dbrow6 ! null) {
        $string0 = db_getfield($dbrow6, sailing_customisation_tab:tab_name, 0);
        $graphic8 = db_getfield($dbrow6, sailing_customisation_tab:tab_icon, 0);
        if ($intarray1($int12) = 1 & $int16 = 0) {
            if ($int14 = -1) {
                $int14 = db_getfield($dbrow6, sailing_customisation_tab:tab_id, 0);
            }
            $int1 = ~sailing_customisation_draw_tab($component0, $int1, $int2, $string0, $graphic8, $int12, $int13);
            $int2 = calc($int2 + 1);
        }
    }
    $int12 = calc($int12 + 1);
}
$int15 = db_getfield($dbrow6, sailing_customisation_tab:tab_id, 0);
if (%sailing_boat_customisation_tab < $int14 | %sailing_boat_customisation_tab > $int15) {
    %sailing_boat_customisation_tab = $int14;
}
if ($int1 = 0) {
    ~error("Boat had no facility options. dbrow [<db_getfield(%sailing_boat_customisation_boat, sailing_boat:name, 0)>]");
}
